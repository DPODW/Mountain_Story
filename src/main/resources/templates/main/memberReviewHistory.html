<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<title>산 스토리 - 검색결과</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" />
	<link rel="stylesheet" href="/assets/css/main.css" />
	<link rel="stylesheet" href="/assets/css/mountain-info.css" />
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script src="assets/js/loadingFunction.js"></script>
	<script src="/assets/js/ajax/reviewStatFunction.js"></script>

</head>

<body class="is-preload">

<div id="header">
	<div style="margin-top: 200px;">
		<img src="/images/MountainStoryImg.png" class="mountainStoryImg">
		<p class="logoText">오늘의 산 !</p>

		<div id="OAuthLogin" th:unless="${#authorization.expression('isAuthenticated()')}">
			<a href="/oauth2/authorization/naver">
				<img id="naverButton" src="/images/naverLoginLogo.png">
			</a>

			<a href="/oauth2/authorization/kakao">
				<img id="kakaoButton" src="/images/kakaoLoginLogo.png">
			</a>
		</div>

		<div th:if="${#authorization.expression('isAuthenticated()')}">
			<hr style="height: 1px; border: 0; background-color: black;">
			<img src="/images/userImg.png" class="userImg">

			<h3 class="userNameText" th:text="${loginMember.name}"></h3>
			<p class="userEmailText" th:text="${loginMember.email}"></p>
			<nav>
				<ol class="breadcrumb userMenu">
					<li class="breadcrumb-item"><a href="#">마이 페이지</a></li>
					<li class="breadcrumb-item"><a th:href="@{/member/review/history}">게시 글</a></li>
					<li class="breadcrumb-item"th:if="${kakao}"><a href="https://kauth.kakao.com/oauth/logout?client_id=0d05cb8e8296ee92d3df6bb356bd1566&logout_redirect_uri=http://localhost:8080/logout">로그아웃</a></li>
					<li class="breadcrumb-item"th:if="${naver}"><a href="/home/naverLogout">로그아웃</a></li>
				</ol>
			</nav>
		</div>
	</div>

	<!-- Nav -->
	<nav id="nav" style="margin-top: -80px;">
		<div style=" border: 1px solid red; width: 370px; height: 400px;"></div>
	</nav>

	<div class="bottom">
		<ul class="icons">
			<li><a href="#" class="icon brands fa-github"><span class="label">Github</span></a></li>
			<li><a href="#" class="icon solid fa-envelope"><span class="label">Email</span></a></li>
		</ul>
	</div>
</div>

<button>좋아요 누른 게시글</button>
<button>싫어요 누른 게시글</button>
<table class="table mountain-table">
	<thead>
	<tr>
		<th scope="col">산 이름</th>
		<th scope="col">제목</th>
		<th scope="col">작성자</th>
		<th scope="col">작성 시간</th>

	</tr>
	</thead>
	<tbody class="mountain-table-content">
	<tr th:each="reviewInfo,reviewInfoIndex: ${reviewHistory}">
		<th scope="row" th:text="${reviewInfo.getReviewMountainName()}"></th>
		<td data-bs-toggle="modal" th:attr="data-bs-target='#'+${reviewInfoIndex.count}" style="cursor:pointer;" th:text="${reviewInfo.getReviewTitle()}"></td>
		<td th:text="${reviewInfo.getReviewWriter()}"></td>
		<td th:text="${reviewInfo.getCreateTime()}"></td>

		<div class="modal fade" th:id="${reviewInfoIndex.count}" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
			<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
				<div class="modal-content">
					<div class="modal-header">
						<h1 class="modal-title fs-5 reviewTitle" id="exampleModalLabel" th:text="${reviewInfo.getReviewTitle()}"><br></h1>
						<div class="reviewContentWriter">
							<a th:text="'작성자: '+${reviewInfo.getReviewWriter()}"></a>
							<a class="reviewContentCreateTime" th:text="'작성: '+${reviewInfo.getCreateTime()}"></a>
						</div>
					</div>
					<div class="modal-body">
						<a class="reviewContent" th:text="${reviewInfo.getReviewContent()}"></a>
						<input type="hidden" id="reviewNumber" th:value="${reviewInfo.getReviewNumber()}">
					</div>

					<div class="modal-footer reviewRateLayout">
						<a class="reviewRateTitle">후기가 도움이 되셨나요?</a>

						<button type="button"  class="reviewGoodBtn" style="all: unset;cursor:pointer;">
							<img src="/images/reviewGood.png" style="width: 100px; margin-right: 100px;">
						</button>
						<a class="reviewRateGoodCount" th:text="${reviewInfo.getReviewRatingGoodCount()}"></a>

						<button type="button"  class="reviewBadBtn" style="all: unset;cursor:pointer;">
							<img src="/images/reviewBad.png"  style="width: 100px;  margin-right: 90px;">
						</button>
						<a class="reviewRateBadCount" th:text="${reviewInfo.getReviewRatingBadCount()}"></a>
					</div>

					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
					</div>
				</div>
			</div>
		</div>
	</tr>
	</tbody>
</table>

<div style="margin-left: 1100px;">
        <span th:each="page:${#numbers.sequence(startPage,endPage)}" style="display: inline-block; margin-right: 10px;">
<!--            number.sequence: 주어진 값 (startPage,endPage) 를 기준으로 숫자를 순서대로 출력해줌(시작부터 끝까지). -->
            <a th:if="${page != nowPage && page != 0}" th:href="@{/member/review/history(page=${page - 1})}" th:text ="${page}"></a>
			<!--            현재 페이지가 아니여야 하며, 페이지는 0이 아니라면 => a 태그로 페이징 이동을 가능하게 함. -1 을 하는 이유는 numbers.sequence 로 생성되는 값은 1 부터 시작하는데
                            페이징은 0부터 시작하기 때문. 고로 - 1 한 값을 넘겨야 페이징이 정상적으로 작동한다. (URL 을 통해 확인 가능함. 페이징 URL 은 -1 값이 넘어간다)-->
            <strong th:if="${page==nowPage}" th:text ="${page}" style="color:red;"></strong>
        </span>
</div>


<script src="/assets/js/showReviewFunction.js"></script>
<script src="/assets/js/loadingFunction.js"></script>
<script src="/assets/js/jquery.min.js"></script>
<script src="/assets/js/jquery.scrolly.min.js"></script>
<script src="/assets/js/jquery.scrollex.min.js"></script>
<script src="/assets/js/browser.min.js"></script>
<script src="/assets/js/breakpoints.min.js"></script>
<script src="/assets/js/util.js"></script>
<script src="/assets/js/main.js"></script>
<script src="/assets/js/main.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.min.js" integrity="sha384-Rx+T1VzGupg4BHQYs2gCW9It+akI2MM/mndMCy36UVfodzcJcF0GGLxZIzObiEfa" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
</body>
</html>
